<mat-card>
    <h3 class="text-uppercase" [marginBottom]="0">
        Trips Purposes
        <mat-icon class="material-icons grayblue-color">notifications</mat-icon>
    </h3>
    <span class="font14">Last updated 5 min ago</span>
    <!-- Table -->
    <section fxLayout="row" [marginTop]="25">
        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z4 tripPurposeGrid" fxFlex="100">
            <!-- tripStart Column -->
            <ng-container matColumnDef="tripstart">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="w-125">Trip Start</th>
                <td mat-cell *matCellDef="let row"> {{row.tripstart | lowercase}} </td>
            </ng-container>
            
            <!-- tripEnd Column -->
            <ng-container matColumnDef="tripend">
                <th mat-header-cell *matHeaderCellDef class="w-125">Trip End</th>
                <td mat-cell *matCellDef="let row" class="multirow">
                    <span *ngFor="let item of row.tripend | keyvalue">
                        {{item.key | lowercase}}
                    </span>
                </td>
            </ng-container>

            <!-- tripPercentage Column -->
            <ng-container matColumnDef="tripPercentage">
                <th mat-header-cell *matHeaderCellDef>Percentage</th>
                <td mat-cell *matCellDef="let row">
                    
                    <span *ngFor="let item of row.tripend | keyvalue; index as i" style="display: block;">
                        <div [ngClass]="i === 0 ? 'bg-blue': i === 1 ? 'bg-seablue': 'bg-green'" class="horibar" [ngStyle]="{'width': item.value}">
                            {{item.value}}
                        </div>
                    </span>
                </td>
            </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </section>
    <section fxLayout="row" [marginTop]="25" class="puposePieChart">
        <!-- Pie Chart -->
        <ngx-charts-pie-chart
            [view]="view"
            [scheme]="colorScheme"
            [results]="commutePieResult"
            [legend]="showLegend"
            [explodeSlices]="explodeSlices"
            [labels]="showLabels"
            [doughnut]="doughnut"
            [gradient]="gradient">
        </ngx-charts-pie-chart>
    </section>
</mat-card>
